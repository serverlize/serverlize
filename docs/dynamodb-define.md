---
id: dynamodb-define
title: Defining Models
---

To get started, we will create a model. The easiest way to create one is
through the CLI:

```bash
$ slz model:create Pet --hashKey id:string \
--attribute ownerId:string \
--timestamps
```

Under `app/models/`, there should now be a new file called `Pet.ts`. Inside it
should look like the following:

```typescript
import { Model } from '@serverlize/framework';
import { attribute, autoGeneratedHashKey, table } from '@serverlize/dynamodb';

@table({ name: 'pets' })
export default class Pet extends Model {
    @autoGeneratedHashKey()
    id: string;

    @attribute()
    ownerId: string;

    @attribute({ default: () => new Date() })
    createdAt: Date;

    @attribute({ default: () => new Date() })
    updatedAt: Date;
}
```

## Model Conventions

Using the `Pet` model from earlier, the Database module makes certain
assumptions about the backing resource in AWS.

### Table Names

By convention, table names are snake-cased, pluralized versions of the model
name. This can be reconfigured by simply setting the correct value in the
`@table()` decorator.

### Timestamps

> @TODO

## Indexes

### Local Secondary Index

> @TODO

### Global Index

Now, let's assume we would like to add a global secondary index to our model.
We can do this with the following:

```typescript
import { Model } from '@serverlize/framework';
import { attribute, autoGeneratedHashKey, table } from '@serverlize/dynamodb';

@table({ name: 'pets' })
export default class Pet extends Model {
    @autoGeneratedHashKey()
    id: string;

    @rangeKey({ defaultProvider: () => new Date() })
    createdAt: Date;

    @attribute({
      indexKeyConfigurations: {
        OwnerIdIndex: 'RANGE'
      }
    })
    ownerId: string;

    @attribute({ defaultProvider: () => new Date() })
    updatedAt: Date;
}
```

## Autoscaling

Adding autoscaling to a DynamoDB table is simply a matter of setting
`autoscale` to `true` in a model.

```typescript
import { Model } from '@serverlize/framework';
import { attribute, autoGeneratedHashKey, table } from '@serverlize/dynamodb';

@table({
  name: 'pets',
  autoScale: true,
})
export default class Pet extends Model {
}
```
